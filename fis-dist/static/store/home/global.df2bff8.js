define("src/store/home/global",function(t,n){function e(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n.mutations=n.actions=n.getters=n.state=void 0;{var o=t("node_modules/babel-runtime/regenerator/index"),r=e(o),u=t("node_modules/babel-runtime/helpers/asyncToGenerator"),i=e(u),c=t("src/utils/cookie"),d=(e(c),t("src/store/home/index")),a=(e(d),t("src/api/index")),s=e(a);n.state={isLoading:!1,docTitle:"",upToken:"",userinfo:{},storeList:[],productList:[],curStoreId:"",curProduct:""},n.getters={uid:function(t){return t.userinfo.userId},userinfo:function(t){return t.userinfo},upToken:function(t){return t.upToken},storeList:function(t){return t.storeList},productList:function(t){return t.productList},curStoreId:function(t){return t.curStoreId},curProduct:function(t){return t.curProduct}},n.actions={LOGIN:function(t,n){var e=t.commit;return s.default.account.doLogin(n).then(function(t){return e("SET_USER_INFO",t.data.data),t})},LOGOUT:function(t){var n=t.commit;return s.default.account.doLogout().then(function(){n("SET_USER_INFO",{})})},FETCH_UPLOAD_TOKEN:function(t){var n=t.commit;return s.default.qiniu.getUploadToken().then(function(t){n("SET_UPTOKEN",t.data.token)})},FETCH_STORE_LIST:function(t){var n=t.commit;return s.default.store.getStores().then(function(t){n("SET_STORE_LIST",t.data.data)})},FETCH_PRODUCT_LIST:function(t,n){{var e=t.commit;t.state}return s.default.product.getProduct({store_id:n}).then(function(t){e("SET_PRODUCT_LIST",t.data.data),e("SET_CURRENT_STORE_ID",n)})},FETCH_PRODUCT_ITEM:function(t,n){var e=this,o=t.commit,u=t.state;return i.default(r.default.mark(function c(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=u.productList.find(function(t){return t._id===n}),e.t0){e.next=5;break}return e.next=4,s.default.product.getProduct({id:n});case 4:e.t0=e.sent.data.data[0];case 5:return t=e.t0,o("SET_CUR_PRODUCT",t),o("SET_CURRENT_STORE_ID",t.store_id),e.abrupt("return",t);case 9:case"end":return e.stop()}},c,e)}))()},ADD_STORE:function(t){var n=t.commit;return s.default.store.postStores().then(function(t){n("ADD_STORE",t.data)})},DE_STORE:function(t,n){var e=t.commit;return s.default.store.deleteStore(n).then(function(){e("DE_STORE",n)})},ADD_PRODUCT:function(t){var n=t.commit;return s.default.product.postProduct().then(function(t){n("ADD_PRODUCT",t.data)})},DE_PRODUCT:function(t,n){var e=t.commit;return s.default.product.deleteProduct(n).then(function(){e("DE_PRODUCT",n)})}},n.mutations={UPDATE_LOADING_STATUS:function(t,n){t.isLoading=n.isLoading},SET_TITLE:function(t,n){t.docTitle=n},SET_USER_INFO:function(t,n){t.userinfo=n},SET_UPTOKEN:function(t,n){t.upToken=n},SET_STORE_LIST:function(t,n){t.storeList=n},SET_PRODUCT_LIST:function(t,n){t.productList=n},SET_CURRENT_STORE_ID:function(t,n){t.curStoreId=n},SET_CUR_PRODUCT:function(t,n){t.curProduct=n},ADD_STORE:function(t,n){t.storeList.push(n)},DE_STORE:function(t,n){t.storeList.splice(t.storeList.findIndex(function(t){return t._id===n}),1)},ADD_PRODUCT:function(t,n){t.productList.push(n)},DE_PRODUCT:function(t,n){t.productList.splice(t.productList.findIndex(function(t){return t._id===n}),1)}}}});